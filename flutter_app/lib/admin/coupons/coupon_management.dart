\'package:cloud_firestore/cloud_firestore.dart\';\nimport \'package:flutter/material.dart\';\nimport \'package:provider/provider.dart\';\n\nimport \'coupon_provider.dart\';\n\nclass CouponManagement extends StatelessWidget {\n  const CouponManagement({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return ChangeNotifierProvider(\n      create: (_) => CouponProvider(),\n      child: const CouponManagementBody(),\n    );\n  }\n}\n\nclass CouponManagementBody extends StatelessWidget {\n  const CouponManagementBody({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    final couponProvider = context.watch<CouponProvider>();\n\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text(\'Coupon Management\'),\n      ),\n      body: StreamBuilder<QuerySnapshot>(\n        stream: couponProvider.couponsStream,\n        builder: (context, snapshot) {\n          if (snapshot.hasError) {\n            return const Center(child: Text(\'Something went wrong\'));\n          }\n\n          if (snapshot.connectionState == ConnectionState.waiting) {\n            return const Center(child: CircularProgressIndicator());\n          }\n\n          final coupons = snapshot.data!.docs;\n\n          return ListView.builder(\n            itemCount: coupons.length,\n            itemBuilder: (context, index) {\n              final coupon = coupons[index];\n              final couponData = coupon.data() as Map<String, dynamic>;\n\n              return ListTile(\n                title: Text(coupon.id),\n                subtitle: Text(\'Status: \${couponData[\'status\']}\'),\n                trailing: Row(\n                  mainAxisSize: MainAxisSize.min,\n                  children: [\n                    IconButton(\n                      icon: const Icon(Icons.pause),\n                      onPressed: () =>\n                          couponProvider.updateCouponStatus(coupon.id, \'paused\'),\n                    ),\n                    IconButton(\n                      icon: const Icon(Icons.play_arrow),\n                      onPressed: () =>\n                          couponProvider.updateCouponStatus(coupon.id, \'active\'),\n                    ),\n                    IconButton(\n                      icon: const Icon(Icons.block),\n                      onPressed: () => couponProvider.revokeCoupon(coupon.id),\n                    ),\n                  ],\n                ),\n              );\n            },\n          );\n        },\n      ),\n    );\n  }\n}\n